<!DOCTYPE html>
<html>
<head>
    <title>ConferÃªncia WMS</title>
    <script src="/static/script.js"></script>
</head>
<body>
    <h1>Leitura de CÃ³digo de Barras</h1>

    <!-- FormulÃ¡rio de leitura -->
    <form id="form-leitura" action="/registrar_codigo" method="post">
        <input type="text" name="codigo" id="campo-codigo" autofocus placeholder="Escaneie o cÃ³digo" required>
        <button type="submit">Registrar</button>
    </form>

    <!-- Lista de pedidos -->
    <h2>ðŸ“¦ Lista de pedidos</h2>
    <ul>
        {% for codigo, descricao in pedidos.items() %}
            <li>{{ codigo }} â†’ {{ descricao }}</li>
        {% endfor %}
    </ul>

    <!-- BotÃ£o para limpar leituras -->
    <form action="/limpar_leituras" method="get" style="margin-top: 20px;">
        <button type="submit" style="background-color: red; color: white;">
            ðŸ§¹ Limpar Leituras
        </button>
    </form>

    <!-- HistÃ³rico dos Ãºltimos cÃ³digos lidos -->
    <h2>ðŸ“‹ Ãšltimos cÃ³digos lidos</h2>
    <ul>
        {% for codigo, descricao in historico %}
            <li>
                {{ codigo }} â†’
                {% if descricao %}
                    {{ descricao }}
                {% else %}
                    <span style="color: red;">CÃ³digo nÃ£o reconhecido</span>
                {% endif %}
            </li>
        {% endfor %}
    </ul>

    <!-- Envio automÃ¡tico ao pressionar Enter -->
    <script>
    document.getElementById("campo-codigo").addEventListener("keypress", function(event) {
        if (event.key === "Enter") {
            event.preventDefault();
            document.getElementById("form-leitura").submit();
        }
    });
    </script>
</body>
</html>